<h2 mat-dialog-title>Editar Persona</h2>

<mat-dialog-content>
  <form [formGroup]="editForm" (ngSubmit)="onSubmit()" class="form-grid">
    <mat-form-field appearance="outline">
      <mat-label>Nombre</mat-label>
      <input matInput type="text" formControlName="firstName" required>
      @if (editForm.controls['firstName'].invalid && (editForm.controls['firstName'].dirty || editForm.controls['firstName'].touched)) {
          <mat-error>
            El nombre es requerido.
          </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Apellido</mat-label>
      <input matInput type="text" formControlName="lastName" required>
      @if (editForm.controls['lastName'].invalid && (editForm.controls['lastName'].dirty || editForm.controls['lastName'].touched)) {
          <mat-error>
            El apellido es requerido.
          </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput type="email" formControlName="email" required>
      @if (editForm.controls['email'].invalid && (editForm.controls['email'].dirty || editForm.controls['email'].touched)) {
          <mat-error>
            @if (editForm.controls['email'].errors?.['required']) { <span>El email es requerido.</span> }
            @if (editForm.controls['email'].errors?.['email']) { <span>El email debe ser válido.</span> }
          </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Posición</mat-label>
      <input matInput type="text" formControlName="position">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Departamento</mat-label>
      <input matInput type="text" formControlName="department">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Salario</mat-label>
      <input matInput type="number" formControlName="salary">
    </mat-form-field>
    @if (errorMessage) {
        <div class="error-message">{{ errorMessage }}</div>
    }
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancelar</button>
  <button mat-button [disabled]="editForm.invalid" (click)="onSubmit()">Guardar Cambios</button>
</mat-dialog-actions>
